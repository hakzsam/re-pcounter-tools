.. _gf108-gpu-hw-events-config:

=======================================
GF108 GPU Hardware events configuration
=======================================

.. contents::

Global counters
===============

GPC domain 0
------------

- setup_primitive_count

  - mode: SIMPLE
  - event_src: 0x56
  - PGRAPH.GPC[0].TPC[0].POLY.PM_MUX: 0x80000000
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0

- ia_requests

  - mode: SIMPLE
  - event_src: 0xcfcf4948/0xeeee
  - PGRAPH.GPC[0].TPC[0].POLY.PM_MUX: 0x92
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0
  - other mux???

- ia_l2_read_bytes

  - mode: SIMPLE
  - event_src: 0xcfcf4948/0xeeee
  - PGRAPH.GPC[0].TPC[0].POLY.PM_MUX: 0x92
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0
  - other mux???

- shader_busy

  - mode: SIMPLE
  - event_src: 0x34353637/0xfffe
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0
  - mp coounter!!!

- texture_busy

  - mode: SIMPLE
  - event_src: 0x5b5c5d5e/0xfffe
  - PGRAPH.GPC[0].TPC[0].TEX.PM_MUX_A: 0x80000022
  - PGRAPH.GPC[0].TPC[0].TEX.PM_UNKC8: 0x80000000
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0

- tex0_bank_conflicts_gpc0_tpcX

  - mode: SIMPLE
  - event_src: 0x61
  - PGRAPH.GPC[0].TPC[X].TEX.PM_MUX_B: 0x80000006
  - PGRAPH.GPC[0].TPC[X].TEX.PM_UNKC8: 0x80000000
  - PGRAPH.GPC[0].TPC[X].L1.PM_MUX: 0x0

- tex0_cache_sector_misses_gpc0_tpcX

  - mode: EVENT_B6
  - start_src: 0x0d0c0b0a/0xffff
  - event_src: 0xcf0ecfcf/0x5555
  - PGRAPH.GPC[0].TPC[X].TEX.PM_MUX_C_D: 0x80000004
  - PGRAPH.GPC[0].TPC[X].TEX.PM_UNKC8: 0x80000003
  - PGRAPH.GPC[0].TPC[X].L1.PM_MUX: 0x0

- tex0_cache_sector_queries_gpc0_tpcX

  - mode: EVENT_B6
  - start_src: 0x0x11100f0e/0xffff
  - event_src: 0xcf12cfcff/0x5555
  - PGRAPH.GPC[0].TPC[X].TEX.PM_MUX_C_D: 0x80000005
  - PGRAPH.GPC[0].TPC[X].TEX.PM_UNKC8: 0x80000003
  - PGRAPH.GPC[0].TPC[X].L1.PM_MUX: 0x0

- tex0_cache_texel_queries

  - mode: EVENT_B6
  - start_src: 0x0d0c0b0a/0xffff
  - event_src: 0xcf0ecfcf/0x5555
  - PGRAPH.GPC[0].TPC[0].TEX.PM_MUX_C_D: 0x80000003
  - PGRAPH.GPC[0].TPC[0].TEX.PM_UNKC8: 0x80000003
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0
  - other mux??

- tex1_bank_conflicts_gpc0_tpcX

  - mode: SIMPLE
  - event_src: 0x61
  - PGRAPH.GPC[0].TPC[X].TEX.PM_MUX_B: 0x80000006
  - PGRAPH.GPC[0].TPC[X].TEX.PM_UNKC8: 0x80000008
  - PGRAPH.GPC[0].TPC[X].L1.PM_MUX: 0x0

- tex1_cache_sector_misses_gpc0_tpcX

  - mode: EVENT_B6
  - start_src: 0x0d0c0b0a/0xffff
  - event_src: 0xcf0ecfcf/0x5555
  - PGRAPH.GPC[0].TPC[X].TEX.PM_MUX_C_D: 0x80000004
  - PGRAPH.GPC[0].TPC[X].TEX.PM_UNKC8: 0x80000004
  - PGRAPH.GPC[0].TPC[X].L1.PM_MUX: 0x0

- tex1_cache_sector_queries_gpc0_tpcX

  - mode: EVENT_B6
  - start_src: 0x0x11100f0e/0xffff
  - event_src: 0xcf12cfcff/0x5555
  - PGRAPH.GPC[0].TPC[X].TEX.PM_MUX_C_D: 0x80000005
  - PGRAPH.GPC[0].TPC[X].TEX.PM_UNKC8: 0x80000004
  - PGRAPH.GPC[0].TPC[X].L1.PM_MUX: 0x0

- shd_tex_requests

  - mode: EVENT_B6
  - start_src: 0x0d0c0b0a/0xffff
  - event_src: 0xcf0ecfcf/0x5555
  - PGRAPH.GPC[0].TPC[0].TEX.PM_MUX_C_D: 0x80000003
  - PGRAPH.GPC[0].TPC[0].TEX.PM_UNKC8: 0x80000003
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0
  - other mux??

- sm_instruction_count_domain_vsmX

  - mode: EVENT_B4
  - start_src: 0xcf333231/0xffff
  - event_src: 0xcfcfcfcf/0x5555
  - PGRAPH.GPC[0].TPC[X].MP.PM_MUX: 0x800000a2
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0

- sm_instruction_count_geometry_vsmX

  - mode: EVENT_B4
  - start_src: 0xcf363534/0xffff
  - event_src: 0xcfcfcfcf/0x5555
  - PGRAPH.GPC[0].TPC[X].MP.PM_MUX: 0x800000a2
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0

- sm_instruction_count_hull_vsmX

  - mode: EVENT_B4
  - start_src: 0xcf363534/0xffff
  - event_src: 0xcfcfcfcf/0x5555
  - PGRAPH.GPC[0].TPC[X].MP.PM_MUX: 0x800000a1
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0

- sm_instruction_count_pixel_vsmX

  - mode: EVENT_B4
  - start_src: 0xcf363534/0xffff
  - event_src: 0xcfcfcfcf/0x5555
  - PGRAPH.GPC[0].TPC[X].MP.PM_MUX: 0x8000002e
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0

- sm_instruction_count_vertex_vsmX

  - mode: EVENT_B4
  - start_src: 0xcf333231/0xffff
  - event_src: 0xcfcfcfcf/0x5555
  - PGRAPH.GPC[0].TPC[X].MP.PM_MUX: 0x800000a1
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0

- warps_launched_vsmX

  - mode: SIMPLE
  - event_src: 0x31
  - PGRAPH.GPC[0].TPC[X].MP.PM_MUX: 0x80000026
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0

- stream_out_bytes

  - mode: EVENT_B4
  - start_src: 0x4d4c4b4a/0xffff
  - event_src: 0xcfcfcfcf/0x5555
  - PGRAPH.GPC[0].TPC[0].POLY.PM_MUX: 0x0000009f
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0

- shaded_pixel_count

  - mode: EVENT_B4
  - start_src: 0x23222120/0xffff
  - event_src: 0xcfcfcfcf/0x5555
  - PGRAPH.GPC[0].TPC[0].UNK400.PM_MUX: 0x8000000e
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0

- l1_local_load_hit

  - mode: SIMPLE
  - event_src: 0x00
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x80000001

- l1_local_load_miss

  - mode: SIMPLE
  - event_src: 0x01
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x80000001

- l1_local_store_hit

  - mode: SIMPLE
  - event_src: 0x02
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x80000001

- l1_local_store_miss

  - mode: SIMPLE
  - event_src: 0x03
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x80000001

- l1_global_load_hit

  - mode: SIMPLE
  - event_src: 0x05
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x80000001

- l1_global_load_miss

  - mode: SIMPLE
  - event_src: 0x06
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x80000001

- uncached_global_load_transaction

  - mode: SIMPLE
  - event_src: 0x02
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x80000002

- global_store_transaction

  - mode: SIMPLE
  - event_src: 0x03
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x80000002

- l1_shared_bank_conflict

  - mode: SIMPLE
  - event_src: 0x00
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x80000006

- sm_cta_launched

  - mode: SIMPLE
  - event_src: 0x26
  - PGRAPH.GPC[0].TPC[0].UNK400.PM_MUX: 0x8000000e

- elapsed_cycles_sm:

  - mode: SIMPLE
  - event_src: 0x00

PART domain 0
-------------

- fb0_subp0_read_sectors

  - mode: SIMPLE
  - event_src: 0x14
  - PBFB[0].PM_UNK100: 0x111

- fb0_subp1_read_sectors

  - mode: SIMPLE
  - event_src: 0x14
  - PBFB[0].PM_UNK100: 0x121

- fb0_subp0_write_sectors

  - mode: SIMPLE
  - event_src: 0x15
  - PBFB[0].PM_UNK100: 0x111

- fb0_subp1_write_sectors

  - mode: SIMPLE
  - event_src: 0x15
  - PBFB[0].PM_UNK100: 0x121

- fb1_subp0_read_sectors

  - mode: SIMPLE
  - event_src: 0x20
  - PBFB[0x1].PM_UNK100: 0x111

- fb1_subp1_read_sectors

  - mode: SIMPLE
  - event_src: 0x20
  - PBFB[0x1].PM_UNK100: 0x121

- fb1_subp0_write_sectors

  - mode: SIMPLE
  - event_src: 0x21
  - PBFB[0x1].PM_UNK100: 0x111

- fb1_subp1_write_sectors

  - mode: SIMPLE
  - event_src: 0x21
  - PBFB[0x1].PM_UNK100: 0x121

- l2_fb_read_bytes

  - multi-pass event
  - event 0

    - mode: EVENT_B4
    - start_src: 0x2f2e2d2c/0xffff
    - event_src: 0x4f0d1301/0x8080
    - PMFB[0].PM_UNK28: 0x00000001
    - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0

  - event 1

    - mode: EVENT_B4
    - start_src: 0x2f2e2d2c/0xffff
    - event_src: 0x4f0c1301/0x8080
    - PMFB[0].PM_UNK28: 0x00000001
    - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0
  - TODO: how to compute it!

- l2_fb_write_bytes

  - multi-pass event
  - event 0

    - mode: EVENT_B4
    - start_src: 0x2f2e2d2c/0xffff
    - event_src: 0x4f0d1201/0x8080
    - PMFB[0].PM_UNK28: 0x00000001
    - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0

  - event 1

    - mode: EVENT_B4
    - start_src: 0x2f2e2d2c/0xffff
    - event_src: 0x4f0c1201/0x8080
    - PMFB[0].PM_UNK28: 0x00000001
    - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0
  - TODO: how to compute it!

- l2_slice0_read_sectors_tex

  - mode: EVENT_B4
  - start_src: 0x2f2e2d2c/0xffff
  - event_src: 0x4f301301/0x8080
  - PMFB[0].PM_UNK28: 0x00000c01
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0

- l2_slice1_read_sectors_tex

  - mode: EVENT_B4
  - start_src: 0x2f2e2d2c/0xffff
  - event_src: 0x4f301301/0x8080
  - PMFB[0].PM_UNK28: 0x00000e17
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0

- l2_subp0_write_sector_misses

  - mode: SIMPLE
  - event_src: 0x04
  - PMFB[0].PM_UNK28: 0xc1

- l2_subp1_write_sector_misses

  - mode: SIMPLE
  - event_src: 0x04
  - PMFB[0].PM_UNK28: 0xd1

- l2_subp0_read_sector_misses

  - mode: SIMPLE
  - event_src: 0x05
  - PMFB[0].PM_UNK28: 0xc1

- l2_subp1_read_sector_misses

  - mode: SIMPLE
  - event_src: 0x05
  - PMFB[0].PM_UNK28: 0xd1

- l2_subp0_write_sector_queries

  - mode: EVENT_B4
  - start_src: 0x2f2e2d2c/0xffff
  - event_src: 0x00013012/0x8080
  - PMFB[0].PM_UNK28: 0x1001

- l2_subp1_write_sector_queries

  - mode: EVENT_B4
  - start_src: 0x2f2e2d2c/0xffff
  - event_src: 0x00013012/0x8080
  - PMFB[0].PM_UNK28: 0x1217

- l2_subp0_read_sector_queries

  - mode: EVENT_B4
  - start_src: 0x2f2e2d2c/0xffff
  - event_src: 0x00013013/0x8080
  - PMFB[0].PM_UNK28: 0x1001

- l2_subp1_read_sector_queries

  - mode: EVENT_B4
  - start_src: 0x2f2e2d2c/0xffff
  - event_src: 0x00013013/0x8080
  - PMFB[0].PM_UNK28: 0x1217

- l2_subp0_read_tex_sector_queries

  - mode: EVENT_B4
  - start_src: 0x2f2e2d2c/0xffff
  - event_src: 0x00013013/0x8080
  - PMFB[0].PM_UNK28: 0xc01

- l2_subp1_read_tex_sector_queries

  - mode: EVENT_B4
  - start_src: 0x2f2e2d2c/0xffff
  - event_src: 0x00013013/0x8080
  - PMFB[0].PM_UNK28: 0xe17

- l2_subp0_read_hit_sectors

  - mode: EVENT_B4
  - start_src: 0x2f2e2d2c/0xffff
  - event_src: 0x01301307/0x8000
  - PMFB[0].PM_UNK28: 0x1003

- l2_subp1_read_hit_sectors

  - mode: EVENT_B4
  - start_src: 0x2f2e2d2c/0xffff
  - event_src: 0x01301307/0x8000
  - PMFB[0].PM_UNK28: 0x1219

- l2_subp0_read_tex_hit_sectors

  - mode: EVENT_B4
  - start_src: 0x2f2e2d2c/0xffff
  - event_src: 0x01301307/0x8000
  - PMFB[0].PM_UNK28: 0xc03

- l2_subp1_read_tex_hit_sectors

  - mode: EVENT_B4
  - start_src: 0x2f2e2d2c/0xffff
  - event_src: 0x01301307/0x8000
  - PMFB[0].PM_UNK28: 0xe19

- l2_subp0_read_sysmem_sector_queries

  - mode: EVENT_B4
  - start_src: 0x2f2e2d2c/0xffff
  - event_src: 0x0001130d/0x8080
  - PMFB[0].PM_UNK28: 0xe01

- l2_subp1_read_sysmem_sector_queries

  - mode: EVENT_B4
  - start_src: 0x2f2e2d2c/0xffff
  - event_src: 0x0001130d/0x8080
  - PMFB[0].PM_UNK28: 0x17

- l2_subp0_write_sysmem_sector_queries

  - mode: EVENT_B4
  - start_src: 0x2f2e2d2c/0xffff
  - event_src: 0x0001120d/0x8080
  - PMFB[0].PM_UNK28: 0x1

- l2_subp1_write_sysmem_sector_queries

  - mode: EVENT_B4
  - start_src: 0x2f2e2d2c/0xffff
  - event_src: 0x0001120d/0x8080
  - PMFB[0].PM_UNK28: 0x17

- l2_subp0_total_read_sector_queries

  - mode: EVENT_B4
  - start_src: 0x2f2e2d2c/0xffff
  - event_src: 0x00000113/0x8888
  - PMFB[0].PM_UNK28: 0x1

- l2_subp1_total_read_sector_queries

  - mode: EVENT_B4
  - start_src: 0x2f2e2d2c/0xffff
  - event_src: 0x00000113/0x8888
  - PMFB[0].PM_UNK28: 0x17

- l2_subp0_total_write_sector_queries

  - mode: EVENT_B4
  - start_src: 0x2f2e2d2c/0xffff
  - event_src: 0x00000112/0x8888
  - PMFB[0].PM_UNK28: 0x1

- l2_subp1_total_write_sector_queries

  - mode: EVENT_B4
  - start_src: 0x2f2e2d2c/0xffff
  - event_src: 0x00000112/0x8888
  - PMFB[0].PM_UNK28: 0x17
PART domain 1
-------------

- rop_busy:

  - mode: SIMPLE
  - event_src: 0x00010203/0xfffe
  - PGRAPH.ROP[0].CROP.PM_MUX_A: 0x8000000f
  - PGRAPH.ROP[0].CROP.PM_MUX_A_B: 0x80000007
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0

- crop_busy

  - mode: SIMPLE
  - event_src: 0x00010203/0xfffe
  - PGRAPH.ROP[0].CROP.PM_MUX_A: 0x8000000f
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0

- zrop_busy

  - mode: SIMPLE
  - event_src: 0x18191a1b/0xfffe
  - PGRAPH.ROP[0].ZROP.PM_MUX_A_B: 0x80000007
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0

HUB domain 4
------------

- gpu_busy:

  - mode: SIMPLE
  - event_src: 0x02
  - PGRAPH.DISPATCH.PM_MUX: 0x7
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0

- geom_busy

  - mode: SIMPLE
  - event_src: 0x6f6f2f2e/0x8888
  - PGRAPH.UNK600.PM_MUX: 0x8000000c
  - PGRAPH.GPC[0].TPC[0].L1.PM_MUX: 0x0

Local counters
==============

GPC 0, TPC 0:

All of these counters need to enable PM_MUX.

- atom_count

  - pm_sigsel_0: 0x63
  - pm_srcsel_0: 0x30

- gred_count

  - pm_sigsel_0: 0x63
  - pm_srcsel_0: 0x40

- inst_issued1_0

  - pm_sigsel_0: 0x7e
  - pm_srcsel_0: 0x10

- inst_issued2_0

  - pm_sigsel_0: 0x7e
  - pm_srcsel_0: 0x20

- inst_issued1_1

  - pm_sigsel_0: 0x7e
  - pm_srcsel_0: 0x40

- inst_issued2_1

  - pm_sigsel_0: 0x7e
  - pm_srcsel_0: 0x50

- thread_inst_executed_0
- thread_inst_executed_1
- thread_inst_executed_2
- thread_inst_executed_3

  - pm_sigsel_0: 0xa3a3a3a3 (0: a3, 1: a5, 2: a4, 3: a6)
  - pm_sigsel_1: 0xa3a3 (0: a3, 1: a5, 2: a4, 3: a6)
  - pm_srcsel_0: 0x00
  - pm_srcsel_1: 0x11
  - pm_srcsel_2: 0x22
  - pm_srcsel_3: 0x33
  - pm_srcsel_4: 0x44
  - pm_srcsel_5: 0x55

- inst_executed

  - pm_sigsel_0: 0x2d2d2d
  - pm_srcsel_0: 0x00
  - pm_srcsel_1: 0x11
  - pm_srcsel_2: 0x22

- prof_trigger_00
- prof_trigger_01
- prof_trigger_02
- prof_trigger_03
- prof_trigger_04
- prof_trigger_05
- prof_trigger_06
- prof_trigger_07

  - pm_sigsel_0: 0x01
  - pm_srcsel_0: 0x00 (0: 00, 1: 10, 2: 20, 3: 30, 4: 40, 5: 50, 6: 60, 7: 70)

- active_warps

  - pm_sigsel_0: 0x24242424
  - pm_sigsel_1: 0x2424
  - pm_srcsel_0: 0x10
  - pm_srcsel_1: 0x21
  - pm_srcsel_2: 0x32
  - pm_srcsel_3: 0x43
  - pm_srcsel_4: 0x54
  - pm_srcsel_5: 0x65

- active_cycles

  - pm_sigsel_0: 0x11
  - pm_srcsel_0: 0x00

- branch

  - pm_sigsel_0: 0x1a1a
  - pm_srcsel_0: 0x00
  - pm_srcsel_1: 0x11

- divergent_branch

  - pm_sigsel_0: 0x1919
  - pm_srcsel_0: 0x20
  - pm_srcsel_1: 0x31

- warps_launched

  - pm_sigsel_0: 0x26
  - pm_srcsel_0: 0x00

- threads_launched

  - pm_sigsel_0: 0x26262626
  - pm_sigsel_1: 0x2626
  - pm_srcsel_0: 0x10
  - pm_srcsel_1: 0x21
  - pm_srcsel_2: 0x32
  - pm_srcsel_3: 0x43
  - pm_srcsel_4: 0x54
  - pm_srcsel_5: 0x65

- local_load

  - pm_sigsel_0: 0x64
  - pm_srcsel_0: 0x20

- local_store

  - pm_sigsel_0: 0x64
  - pm_srcsel_0: 0x50

- gld_request

  - pm_sigsel_0: 0x64
  - pm_srcsel_0: 0x30

- gst_request

  - pm_sigsel_0: 0x64
  - pm_srcsel_0: 0x60

- shared_load

  - pm_sigsel_0: 0x64
  - pm_srcsel_0: 0x10

- shared_store

  - pm_sigsel_0: 0x64
  - pm_srcsel_0: 0x40

TODO
====

vertex_shader_instruction_rate

hull_shader_instruction_rate

domain_shader_instruction_rate

geometry_shader_instruction_rate

pixel_shader_instruction_rate

shd_tex_read_bytes

shd_l1_requests

shd_l1_read_bytes

tex_l2_requests

tex_l2_read_bytes

l1_l2_requests

l1_l2_bytes

rop_l2_read_bytes

rop_l2_write_bytes
